jQuery(document).ready((function(t){t.ajaxSetup({cache:!1}),t("body.single .edit").on("click",(function(e){e.preventDefault();var a="#"+t(this).data("form");return t(a).addClass("active"),!1})),t("body.single #edit-listing-form, body.single #edit-marketstatus-form").submit((function(){return t.ajax({url:"https://glada.aero/wp-admin/admin-ajax.php",type:"POST",data:t(this).find(":input").filter((function(e,a){return""!=t(a).val()})).serialize(),dataType:"json",beforeSend:function(e){t("#edit-listing-submit, #edit-marketstatus-submit").addClass("loading").text("Sending...")},success:function(e){t(".formbox").html("<div><h1>Success!</h1><p>Your listing has been updated.<br>The page will automatically refresh in 5 seconds.</p></div>"),setTimeout((function(){location.reload()}),4e3)}}),!1})),t("body.single #delete-form").submit((function(){return t.ajax({url:"https://glada.aero/wp-admin/admin-ajax.php",type:"POST",data:t("#delete-form :input").filter((function(e,a){return""!=t(a).val()})).serialize(),dataType:"json",beforeSend:function(e){t("#delete-form-submit").addClass("loading").text("Deleting...")},success:function(e){t(".formbox").html("<div><h1>Success!</h1><p>Your listing has been removed.<br>Redirecting in 5 seconds...</p></div>"),setTimeout((function(){window.location.href="/members"}),4e3)}}),!1})),t("body.page .edit, body.page .status").on("click",(function(e){e.preventDefault();var a=t(this).attr("href"),i="#"+t(this).data("form"),n=a+" "+i;return t(".edit-forms").load(n,(function(){t(i).parent().addClass("active"),t(".closeform").on("click",(function(e){e.preventDefault(),t(".formbox").removeClass("active"),t(".edit-forms").removeClass("active")})),t("#edit-listing-form, #edit-marketstatus-form").submit((function(){return $id=t(this).find('input[name="post_id"]').val(),$status=t(this).find("#marketstatus").children("option:selected").val(),$statusname=t(this).find("#marketstatus").children("option:selected").text(),t.ajax({url:"https://glada.aero/wp-admin/admin-ajax.php",type:"POST",data:t(this).find(":input").filter((function(e,a){return""!=t(a).val()})).serialize(),dataType:"json",beforeSend:function(e){t("#edit-listing-submit, #edit-marketstatus-submit").addClass("loading").text("Sending...")},success:function(e){t(".formbox").html("<div><h1>Success!</h1><p>Your listing has been updated.</p></div>"),t(".listings ul").find("li[data-post='"+$id+"'] .status").attr("data-status",$status).text($statusname),setTimeout((function(){t(".formbox").removeClass("active"),t(".edit-forms").removeClass("active").empty()}),2e3)}}),!1})),t("#delete-form").submit((function(){return $post=t("#delete-form input[name=post_id]").val(),t(".mylistings").find('li[data-post="'+$post+'"]').remove(),t.ajax({url:"https://glada.aero/wp-admin/admin-ajax.php",type:"POST",data:t("#delete-form :input").filter((function(e,a){return""!=t(a).val()})).serialize(),dataType:"json",beforeSend:function(e){t("#delete-form-submit").addClass("loading").text("Deleting...")},success:function(e){t(".formbox").html("<div><h1>Success!</h1><p>Your listing has been successfully removed.</p></div>"),setTimeout((function(){t(".formbox").removeClass("active"),t(".edit-forms").removeClass("active").empty()}),2e3)}}),!1}))})),!1})),t(".closeform").on("click",(function(e){e.preventDefault(),t(".formbox").removeClass("active"),t(".edit-forms").removeClass("active")})),t(".fancyfileinput").each((function(){var e=t(this),a=e.next("label"),i=a.html();e.on("change",(function(t){var e=t.target.value.split("\\").pop();e?a.find("span").html(e):a.html(i)})),e.on("focus",(function(){e.addClass("has-focus")})).on("blur",(function(){e.removeClass("has-focus")}))})),t(document).ajaxComplete((function(){t(".fancyfileinput").each((function(){var e=t(this),a=e.next("label"),i=a.html();e.on("change",(function(t){var e=t.target.value.split("\\").pop();e?a.find("span").html(e):a.html(i)})),e.on("focus",(function(){e.addClass("has-focus")})).on("blur",(function(){e.removeClass("has-focus")}))}))}))}));