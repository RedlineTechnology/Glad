jQuery(document).ready((function(e){var a,t=query_params.input,r=query_params.posts,s=query_params.output,o=query_params.secondary,n=JSON.parse(r).post_type;function p(a){e.ajax({url:query_params.ajaxurl,type:e("#searchform").attr("method"),data:a,dataType:"json",beforeSend:function(a){e(s).html('<div style="text-align:center; width: 100%;"><center><img style="width:25px; height: 25px; margin:100px auto;" src="https://glad.aero/wp-content/themes/Glad/images/ajax-loader.gif"></center></div>')},success:function(a){query_params.current_page=1,query_params.posts=a.posts,query_params.max_page=a.max_page,query_params.manual=a.manual,e(s).html(a.content),e(s).addClass("ajaxed"),o&&a.secondary&&e(o).html(a.secondary)}})}e(t).keyup((function(){e(this).val();clearTimeout(a),a=setTimeout((function(a){if(""!=a){var t=e("#searchform").serializeArray();t.push({name:"posts",value:r}),p(t)}}),300)})),"listing"==n&&(autocomplete(document.getElementById("searchfield"),makes),e(document).on("click",".autocomplete-items div",(function(){var a=e("#searchform").serializeArray(),t=e(this).find("input").attr("value").replace(/ .*/,"");for(var s in a)"searchfield"==a[s].name&&(a[s].value=t);a.push({name:"posts",value:r}),p(a)}))),e(document).on("click",".opp-sidebar i",(function(){return p({action:"listingsearch",searchfield:e(this).attr("type"),posts:r}),!1})),e(document).on("click",".list-item-listing",(function(){e(this).toggleClass("expanded")})),e(document).on("click",".opp-main",(function(){var a=e(this),t=e(this).attr("id");return e.ajax({url:query_params.ajaxurl,type:"POST",dataType:"json",data:{action:"expandpost",post:t},beforeSend:function(t){e(a).addClass("loading")},success:function(t){e("#postbox").html(t.content),e("#postbox").addClass("active"),e(a).removeClass("loading"),e("#page-wrapper").toggleClass("noscroll")}}),!1})),e(document).on("click",".closebox",(function(a){a.preventDefault(),e("#postbox").removeClass("active"),e("#page-wrapper").toggleClass("noscroll")})),e(document).on("click",(function(a){e(a.target).closest("#postbox .inner").length||e(a.target).closest(".closebox").length||e("#postbox").hasClass("active")&&(e("#postbox").removeClass("active"),e("#page-wrapper").toggleClass("noscroll"))}));var i=!1;e("body.post-type-archive").length&&(i=!0),e("#page-wrapper").scroll((function(){var a={action:"loadmore",posts:query_params.posts,page:query_params.current_page,manual:query_params.manual};e("#page-wrapper").scrollTop()>e(s).height()-700&&1==i&&(console.log("made it to the thing!"),e.ajax({url:query_params.ajaxurl,data:a,type:"POST",beforeSend:function(a){e(".loaderwrapper").show(),i=!1},success:function(a){a?(e(".loaderwrapper").hide(),e(s).append(a),query_params.current_page++,i=!0):e(".loaderwrapper").hide()}}))})),e("#filter").submit((function(){return e.ajax({url:query_params.ajaxurl,data:e("#filter").serialize().replace(/&?[^=]+=&|&[^=]+=$/g,""),dataType:"json",type:e("#filter").attr("method"),beforeSend:function(a){e("#filter").find("button").text("Processing..."),e(s).html('<div style="text-align:center; width: 100%;"><center><img style="width:25px; height: 25px; margin:100px auto;" src="https://glad.aero/wp-content/themes/Glad/images/ajax-loader.gif"></center></div>')},success:function(a){query_params.current_page=1,query_params.posts=a.posts,query_params.max_page=a.max_page,query_params.manual=!1,e("#filter").find("button").text("Update"),e(s).html(a.content),e(s).addClass("ajaxed")}}),!1}))}));