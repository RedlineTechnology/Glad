jQuery((function(a){var e=!0;a(".sort_heading").click((function(t){if(t.preventDefault(),1==e){var s=a(this),r=a(this).attr("id"),p=a(this).attr("data-sort");a.ajax({url:query_params.ajaxurl,crossDomain:!0,type:"POST",data:{action:"sortcomps",posts:query_params.posts,column:r,sort:p,page:1},dataType:"json",beforeSend:function(t){a(".table-wrapper").addClass("loading"),e=!1},success:function(t){"asc"==p?s.attr("data-sort","desc"):s.attr("data-sort","asc"),a(".table-wrapper").removeClass("loading"),a(".sort_heading").removeClass("active"),s.addClass("active"),a("#comps_table li:not(:first)").remove(),a("#comps_table").append(t.content),query_params.posts=t.posts,query_params.current_page=t.page,query_params.max_page=t.max_page,a(".comp_paginate").removeClass("active"),t.page>1&&a(".comp_paginate#prev").addClass("active"),t.max_page>1&&t.max_page!=t.page&&a(".comp_paginate#next").addClass("active"),e=!0}})}})),a(".comp_paginate").click((function(t){if(t.preventDefault(),1==e){var s=a(this).attr("id");a.ajax({url:query_params.ajaxurl,crossDomain:!0,type:"POST",data:{action:"sortcomps",posts:query_params.posts,column:a(".sort_heading.active").attr("id"),sort:a(".sort_heading.active").attr("data-sort"),page:query_params.current_page,dir:s},dataType:"json",beforeSend:function(t){a(".table-wrapper").addClass("loading"),e=!1},success:function(t){a(".table-wrapper").removeClass("loading"),a("#comps_table li:not(:first)").remove(),a("#comps_table").append(t.content),query_params.posts=t.posts,query_params.current_page=t.page,query_params.max_page=t.max_page,a(".comp_paginate").removeClass("active"),t.page>1&&a(".comp_paginate#prev").addClass("active"),t.max_page>1&&t.max_page!=t.page&&a(".comp_paginate#next").addClass("active"),e=!0}})}})),a(document).on("click",".comp_inspect",(function(e){e.preventDefault();var t=a(this).attr("id");a.ajax({url:query_params.ajaxurl,crossDomain:!0,type:"POST",data:{action:"getcomp",id:t},dataType:"json",beforeSend:function(e){a(".table-wrapper").addClass("loading")},success:function(e){a(".table-wrapper").removeClass("loading"),a(".fullcomp-wrapper").addClass("loaded"),a("#fullcomp").html(e.content)}})})),a(document).on("click","#fullcomp .close",(function(e){e.preventDefault(),a(".fullcomp-wrapper").removeClass("loaded")})),a(document).on("click",(function(e){var t=a("#fullcomp");t===event.target||t.has(event.target).length||a(".fullcomp-wrapper").hasClass("loaded")&&a(".fullcomp-wrapper").removeClass("loaded")}))}));